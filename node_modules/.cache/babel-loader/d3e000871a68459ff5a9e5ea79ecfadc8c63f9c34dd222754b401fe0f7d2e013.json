{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Dropdown}from'react-bootstrap';import'bootstrap/dist/css/bootstrap.min.css';// Import Bootstrap CSS  \nimport Register from'./Register';// Import the Register component  \nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[messages,setMessages]=useState([]);const[content,setContent]=useState('');const[feedback,setFeedback]=useState('');const apiUrl='http://127.0.0.1:8000/api/messages/';// Your API endpoint  \nconst[showRegister,setShowRegister]=useState(false);// State to toggle registration form \n// Replace this with your actual token  \nconst token='your_token_here';const fetchMessages=async()=>{try{const response=await fetch(apiUrl,{method:'GET',headers:{'Authorization':`Token ${token}`,// Ensuring the token is included  \n'Content-Type':'application/json'}});if(!response.ok){throw new Error('Failed to fetch messages');}const data=await response.json();setMessages(data);}catch(error){console.error('Error fetching messages:',error);setFeedback('Error fetching messages.');}};const handleSubmit=async e=>{e.preventDefault();if(!content)return;try{const response=await fetch(apiUrl,{method:'POST',headers:{'Authorization':`Token ${token}`,'Content-Type':'application/json'},body:JSON.stringify({content})});if(!response.ok){throw new Error('Failed to send message');}setFeedback('Message sent!');setContent('');fetchMessages();}catch(error){console.error('Error sending message:',error);setFeedback('Error sending message.');}};useEffect(()=>{fetchMessages();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Parent-Teacher Communication App\"}),/*#__PURE__*/_jsxs(Dropdown,{children:[/*#__PURE__*/_jsx(Dropdown.Toggle,{variant:\"success\",id:\"dropdown-basic\",children:\"Navigate\"}),/*#__PURE__*/_jsxs(Dropdown.Menu,{children:[/*#__PURE__*/_jsx(Dropdown.Item,{href:\"#/messages\",children:\"View Messages\"}),/*#__PURE__*/_jsx(Dropdown.Item,{href:\"#/send-message\",children:\"Send Message\"})]})]}),feedback&&/*#__PURE__*/_jsx(\"p\",{className:\"alert alert-info\",children:feedback}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Messages\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-group\",children:messages.map(message=>/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:message.content},message.id))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Send a Message\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"content\",className:\"form-label\",children:\"Message:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"content\",name:\"content\",value:content,onChange:e=>setContent(e.target.value),className:\"form-control\",required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Send\"})]})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Dropdown","Register","jsx","_jsx","jsxs","_jsxs","App","messages","setMessages","content","setContent","feedback","setFeedback","apiUrl","showRegister","setShowRegister","token","fetchMessages","response","fetch","method","headers","ok","Error","data","json","error","console","handleSubmit","e","preventDefault","body","JSON","stringify","className","children","Toggle","variant","id","Menu","Item","href","map","message","onSubmit","htmlFor","type","name","value","onChange","target","required"],"sources":["C:/Users/USER/Desktop/Parents-Teachers Commuication app/parent_teacher_communication/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';  \r\nimport { Dropdown } from 'react-bootstrap';  \r\nimport 'bootstrap/dist/css/bootstrap.min.css'; // Import Bootstrap CSS  \r\nimport Register from './Register'; // Import the Register component  \r\n\r\nfunction App() {  \r\n  const [messages, setMessages] = useState([]);  \r\n  const [content, setContent] = useState('');  \r\n  const [feedback, setFeedback] = useState('');  \r\n  const apiUrl = 'http://127.0.0.1:8000/api/messages/'; // Your API endpoint  \r\n  const [showRegister, setShowRegister] = useState(false); // State to toggle registration form \r\n\r\n  // Replace this with your actual token  \r\n  const token = 'your_token_here';   \r\n\r\n  const fetchMessages = async () => {  \r\n    try {  \r\n      const response = await fetch(apiUrl, {  \r\n        method: 'GET',  \r\n        headers: {  \r\n          'Authorization': `Token ${token}`, // Ensuring the token is included  \r\n          'Content-Type': 'application/json',  \r\n        },  \r\n      });  \r\n      if (!response.ok) {  \r\n        throw new Error('Failed to fetch messages');  \r\n      }  \r\n      const data = await response.json();  \r\n      setMessages(data);  \r\n    } catch (error) {  \r\n      console.error('Error fetching messages:', error);  \r\n      setFeedback('Error fetching messages.');  \r\n    }  \r\n  };  \r\n\r\n  const handleSubmit = async (e) => {  \r\n    e.preventDefault();  \r\n    if (!content) return;  \r\n\r\n    try {  \r\n      const response = await fetch(apiUrl, {  \r\n        method: 'POST',  \r\n        headers: {  \r\n          'Authorization': `Token ${token}`,  \r\n          'Content-Type': 'application/json',  \r\n        },  \r\n        body: JSON.stringify({ content }),  \r\n      });  \r\n\r\n      if (!response.ok) {  \r\n        throw new Error('Failed to send message');  \r\n      }  \r\n\r\n      setFeedback('Message sent!');  \r\n      setContent('');  \r\n      fetchMessages();  \r\n    } catch (error) {  \r\n      console.error('Error sending message:', error);  \r\n      setFeedback('Error sending message.');  \r\n    }  \r\n  };  \r\n\r\n  useEffect(() => {  \r\n    fetchMessages();  \r\n  }, []);  \r\n\r\n  return (  \r\n    <div className=\"container\">  \r\n      <h1>Parent-Teacher Communication App</h1>  \r\n      {/* Dropdown Navigation */}  \r\n      <Dropdown>  \r\n        <Dropdown.Toggle variant=\"success\" id=\"dropdown-basic\">  \r\n          Navigate  \r\n        </Dropdown.Toggle>  \r\n        <Dropdown.Menu>  \r\n          <Dropdown.Item href=\"#/messages\">View Messages</Dropdown.Item>  \r\n          <Dropdown.Item href=\"#/send-message\">Send Message</Dropdown.Item>  \r\n          {/* Add more items as needed */}  \r\n        </Dropdown.Menu>  \r\n      </Dropdown>  \r\n\r\n      {feedback && <p className=\"alert alert-info\">{feedback}</p>}  \r\n      <div>  \r\n        <h2>Messages</h2>  \r\n        <ul className=\"list-group\">  \r\n          {messages.map((message) => (  \r\n            <li key={message.id} className=\"list-group-item\">{message.content}</li>  \r\n          ))}  \r\n        </ul>  \r\n      </div>  \r\n      <div>  \r\n        <h2>Send a Message</h2>  \r\n        <form onSubmit={handleSubmit}>  \r\n          <div className=\"mb-3\">  \r\n            <label htmlFor=\"content\" className=\"form-label\">Message:</label>  \r\n            <input  \r\n              type=\"text\"  \r\n              id=\"content\"  \r\n              name=\"content\"  \r\n              value={content}  \r\n              onChange={(e) => setContent(e.target.value)}  \r\n              className=\"form-control\"  \r\n              required  \r\n            />  \r\n          </div>  \r\n          <button type=\"submit\" className=\"btn btn-primary\">Send</button>  \r\n        </form>  \r\n      </div>  \r\n    </div>  \r\n  );  \r\n}  \r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}